<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crônica do Cultivador</title>
  <style>
    /* Reset e tipografia */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Noto Serif SC', serif;
      background: #f5f1e6 url('https://i.imgur.com/WZfOZjc.jpg') center/cover fixed;
      color: #3b2f2f;
      line-height: 1.4;
      padding: 8px;
    }
    .game-container {
      max-width: 480px;
      margin: 0 auto;
      background: rgba(255,255,255,0.9);
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.2);
      padding: 12px;
    }
    h1 { text-align: center; font-size: 1.6em; margin-bottom: 8px; }
    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      justify-content: center;
      margin-bottom: 8px;
    }
    .button {
      flex: 1 1 45%;
      background: #8b0000;
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 8px;
      text-align: center;
      cursor: pointer;
      font-size: 0.9em;
    }
    .button:hover { background: #a40000; }
    .status {
      font-size: 0.9em;
      margin-bottom: 8px;
      text-align: center;
    }
    .section {
      display: none;
      margin-top: 10px;
      background: #f4efe3;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #c2b7a3;
    }
    .active { display: block !important; }
    .log, #logCombate {
      margin-top: 8px;
      height: 80px;
      overflow-y: auto;
      background: #f8f5f0;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 0.8em;
    }
    ul { padding-left: 1.2em; margin-top: 4px; }
    @media (min-width: 600px) {
      .game-container { max-width: 600px; }
      .button { flex: 1 1 30%; }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>Crônica do Cultivador</h1>
    <div class="buttons">
      <button class="button" onclick="mostrarAba('cultivo')">Cultivo</button>
      <button class="button" onclick="mostrarAba('loja')">Loja</button>
      <button class="button" onclick="mostrarAba('habilidades')">Habilidades</button>
      <button class="button" onclick="mostrarAba('aventuras')">Aventuras</button>
      <button class="button" onclick="mostrarAba('tecnicas')">Técnicas</button>
      <button class="button" onclick="mostrarAba('seitas')">Seitas</button>
      <button class="button" onclick="mostrarAba('artefatos')">Artefatos</button>
      <button class="button" onclick="mostrarAba('combate')">Combate</button>
      <button class="button" onclick="mostrarAba('personagem')">Personagem</button>
      <button class="button" onclick="mostrarAba('inventario')">Inventário</button>
    </div>
    <div class="status">
      Reino: <span id="reino">Mortal</span> |
      Qi: <span id="qi">0</span> |
      Moedas: <span id="moedas">0</span> |
      Equip: <span id="equipamento">Nenhum</span>
    </div>

    <div id="cultivo" class="section active">
      <h3>Reinos de Cultivo</h3>
      <ul id="lista-reinos"></ul>
    </div>
    <!-- Other sections omitted for brevity -->
    <p id="log" class="log"></p>
  </div>

  <script>
    // Global variables
    var qi = 0, moedas = 0, reinoIndex = 0, equipamento = 'Nenhum', seita = null, artefato = null;
    var inventory = [], purchasedSkills = [];
    var reinos = ['Mortal','Refinamento de Qi','Fundação','Núcleo Dourado','Alma Nascente','Transformação Espiritual','Ascensão','Imortal Verdadeiro'];
    var qiPorReino = [0,100,300,1000,3000,10000,50000,99999];
    var innateSkills = [{name:'Visão Interna',realm:1},{name:'Corpo Resiliente',realm:2},{name:'Força Espiritual',realm:3}];
    var player = {hp:100,maxHp:100,for:10,agi:5,vit:10,critChance:0.2,esquivaChance:0.15};
    var inimigos = [
      {nome:'Cobra Sombria',hp:60,elemento:'gelo',fraqueza:'fogo',equipDrop:'Espada de Gelo',value:50},
      {nome:'Javali Flamejante',hp:80,elemento:'fogo',fraqueza:'agua',equipDrop:'Escudo Flamejante',value:75},
      {nome:'Guardião de Pedra',hp:100,elemento:'terra',fraqueza:'vento',equipDrop:'Armadura de Pedra',value:100}
    ];
    var inimigo = null;

    // Global functions
    function log(msg, area) {
      var box = document.getElementById(area || 'log');
      box.innerHTML = '<div>> ' + msg + '</div>' + box.innerHTML;
    }
    function mostrarAba(id) {
      document.querySelectorAll('.section').forEach(function(s){ s.classList.remove('active'); });
      document.getElementById(id).classList.add('active');
      atualizarUI();
    }
    function atualizarUI() {
      document.getElementById('qi').textContent = qi;
      document.getElementById('moedas').textContent = moedas;
      document.getElementById('equipamento').textContent = equipamento;
      // Continue updating DOM elements for lists, sections, etc.
    }
    function cultivarQi() {
      qi += 1 + reinoIndex; log('+' + (1+reinoIndex) + ' Qi');
      atualizarUI();
    }
    function avancarReino() {
      var custo = qiPorReino[reinoIndex+1] || Infinity;
      if(qi >= custo) { qi -= custo; reinoIndex++; log('Avançou para ' + reinos[reinoIndex]); }
      else log('Qi insuficiente');
      atualizarUI();
    }
    // Other global functions: comprarItem, comprarHabilidade, explorarLugar, usarExplosaoInterior,
    // escolherSeita, equiparArtefato, iniciarCombate, turnoJogador, turnoInimigo, atualizarInventario...

    // Initialization
    document.addEventListener('DOMContentLoaded', function() {
      // Load saved state
      // Set intervals
      cultivarQi();
      setInterval(cultivarQi, 3000);
      window.addEventListener('beforeunload', function() {
        localStorage.setItem('save', JSON.stringify({qi,moedas,reinoIndex,equipamento,seita,artefato,inventory,player}));
      });
      var data = JSON.parse(localStorage.getItem('save') || '{}');
      if(data.qi !== undefined) {
        qi = data.qi; moedas = data.moedas; reinoIndex = data.reinoIndex;
        equipamento = data.equipamento; seita = data.seita; artefato = data.artefato;
        inventory = data.inventory || []; player = data.player || player;
        log('Progresso carregado');
      }
      atualizarUI();
    });
  </script>
</body>
</html>
